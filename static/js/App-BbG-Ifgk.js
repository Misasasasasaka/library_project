import{E as y,g as m,h as g,i as h,d as p,b as t,e as i,w as c,r as k,G as V,y as _,k as r,v as n,t as f,f as b,z as C,o as x,u as N,H as P,J as S}from"./index-BZEQeExx.js";const U={class:"min-h-screen bg-content flex items-center justify-center p-4"},q={class:"w-full max-w-md"},B={class:"w-16 h-16 bg-claude-500 rounded-2xl flex items-center justify-center mx-auto shadow-lg group-hover:bg-claude-600 transition-colors"},M={class:"bg-white rounded-2xl shadow-sm border border-border p-8"},T={class:"space-y-5"},j={key:0,class:"mt-4 p-3 bg-red-50 text-red-600 text-sm rounded-xl"},D=["disabled"],E={class:"mt-6 text-center text-sm text-text-muted"},A={__name:"App",setup(R){const v=C(),s=y({username:"",mail:"",password:"",confirmPassword:""}),a=m(!1),o=m("");g(async()=>{try{await h("/api/auth/csrf")}catch{console.error("获取 CSRF Token 失败")}});async function w(){if(o.value="",s.password!==s.confirmPassword){o.value="两次输入的密码不一致";return}if(s.password.length<6){o.value="密码长度至少为6位";return}a.value=!0;try{await S(s.username,s.password,s.mail||void 0),v.push("/books/")}catch(d){o.value=d.message||"注册失败，请稍后重试"}finally{a.value=!1}}return(d,e)=>{const u=k("router-link");return x(),p("div",U,[t("div",q,[i(u,{to:"/books/",class:"block text-center mb-8 group"},{default:c(()=>[t("div",B,[i(N(P),{class:"w-8 h-8 text-white","stroke-width":2})]),e[4]||(e[4]=t("h1",{class:"mt-6 text-2xl font-semibold text-text-primary group-hover:text-claude-600 transition-colors"},"图书馆",-1)),e[5]||(e[5]=t("p",{class:"mt-2 text-text-muted"},"创建账户，开启阅读之旅",-1))]),_:1}),t("div",M,[t("form",{onSubmit:V(w,["prevent"])},[t("div",T,[t("div",null,[e[6]||(e[6]=t("label",{class:"label"},"用户名",-1)),r(t("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>s.username=l),type:"text",required:"",class:"input",placeholder:"请输入用户名"},null,512),[[n,s.username]])]),t("div",null,[e[7]||(e[7]=t("label",{class:"label"},"邮箱",-1)),r(t("input",{"onUpdate:modelValue":e[1]||(e[1]=l=>s.mail=l),type:"email",class:"input",placeholder:"请输入邮箱（可选，用于接收通知）"},null,512),[[n,s.mail]])]),t("div",null,[e[8]||(e[8]=t("label",{class:"label"},"密码",-1)),r(t("input",{"onUpdate:modelValue":e[2]||(e[2]=l=>s.password=l),type:"password",required:"",minlength:"6",class:"input",placeholder:"请输入密码（至少6位）"},null,512),[[n,s.password]])]),t("div",null,[e[9]||(e[9]=t("label",{class:"label"},"确认密码",-1)),r(t("input",{"onUpdate:modelValue":e[3]||(e[3]=l=>s.confirmPassword=l),type:"password",required:"",class:"input",placeholder:"请再次输入密码"},null,512),[[n,s.confirmPassword]])])]),o.value?(x(),p("div",j,f(o.value),1)):_("",!0),t("button",{type:"submit",disabled:a.value,class:"mt-6 w-full btn-primary py-3 text-base font-medium"},f(a.value?"注册中...":"注册"),9,D)],32),t("p",E,[e[11]||(e[11]=b(" 已有账户？ ",-1)),i(u,{to:"/login/",class:"text-claude-600 hover:text-claude-700 font-medium"},{default:c(()=>[...e[10]||(e[10]=[b("立即登录",-1)])]),_:1})])])])])}}};export{A as default};
