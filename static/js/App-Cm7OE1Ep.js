import{D as y,r as i,f as g,g as h,a as u,b as t,d as n,s as m,x as _,E as k,y as V,w as p,v as c,t as x,e as b,z as C,o as f,u as N,L as S,G as B}from"./index-BneSkAzL.js";const D={class:"min-h-screen bg-content flex items-center justify-center p-4"},M={class:"w-full max-w-md"},T={class:"w-16 h-16 bg-claude-500 rounded-2xl flex items-center justify-center mx-auto shadow-lg group-hover:bg-claude-600 transition-colors"},j={class:"bg-white rounded-2xl shadow-sm border border-border p-8"},q={class:"space-y-5"},E={key:0,class:"mt-4 p-3 bg-red-50 text-red-600 text-sm rounded-xl"},L=["disabled"],R={class:"mt-6 text-center text-sm text-text-muted"},A={__name:"App",setup(U){const v=C(),s=y({username:"",password:""}),o=i(!1),a=i("");g(async()=>{try{await h("/api/auth/csrf")}catch{console.error("获取 CSRF Token 失败")}});async function w(){a.value="",o.value=!0;try{await B(s.username,s.password),v.push("/books/")}catch(r){a.value=r.message||"登录失败，请检查用户名和密码"}finally{o.value=!1}}return(r,e)=>{const d=_("router-link");return f(),u("div",D,[t("div",M,[n(d,{to:"/books/",class:"block text-center mb-8 group"},{default:m(()=>[t("div",T,[n(N(S),{class:"w-8 h-8 text-white","stroke-width":2})]),e[2]||(e[2]=t("h1",{class:"mt-6 text-2xl font-semibold text-text-primary group-hover:text-claude-600 transition-colors"},"智慧图书馆",-1)),e[3]||(e[3]=t("p",{class:"mt-2 text-text-muted"},"欢迎回来，请登录您的账户",-1))]),_:1}),t("div",j,[t("form",{onSubmit:k(w,["prevent"])},[t("div",q,[t("div",null,[e[4]||(e[4]=t("label",{class:"label"},"用户名",-1)),p(t("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>s.username=l),type:"text",required:"",class:"input",placeholder:"请输入用户名"},null,512),[[c,s.username]])]),t("div",null,[e[5]||(e[5]=t("label",{class:"label"},"密码",-1)),p(t("input",{"onUpdate:modelValue":e[1]||(e[1]=l=>s.password=l),type:"password",required:"",class:"input",placeholder:"请输入密码"},null,512),[[c,s.password]])])]),a.value?(f(),u("div",E,x(a.value),1)):V("",!0),t("button",{type:"submit",disabled:o.value,class:"mt-6 w-full btn-primary py-3 text-base font-medium"},x(o.value?"登录中...":"登录"),9,L)],32),t("p",R,[e[7]||(e[7]=b(" 还没有账户？ ",-1)),n(d,{to:"/register/",class:"text-claude-600 hover:text-claude-700 font-medium"},{default:m(()=>[...e[6]||(e[6]=[b("立即注册",-1)])]),_:1})])])])])}}};export{A as default};
